---
layout: base
permalink: /jobs/
title: Jobs
---

<!-- Add a search bar -->
<input type="text" id="searchInput" placeholder="Search for job titles">

<!-- Add dropdowns for filtering -->
<label for="fieldSelect">Filter by Field:</label>
<select id="fieldSelect">
    <option value="">All Fields</option>
    <option value="Technology">Technology</option>
    <option value="Finance">Finance</option>
    <!-- Add more options as needed -->
</select>

<label for="locationSelect">Filter by Location:</label>
<select id="locationSelect">
    <option value="">All Locations</option>
    <option value="On-site">On-site</option>
    <option value="Remote">Remote</option>
    <!-- Add more options as needed -->
</select>



<table>
    <thead>
        <tr>
            <th>Job ID</th>
            <th>Title</th>
            <th>Description</th>
            <th>Field</th>
            <th>Location</th>
            <th>Qualification</th>
            <th>Pay</th>
            <th>View</th>
        </tr>
    </thead>
    <tbody id="results">
     
    </tbody>
</table>

<script>
    const resultContainer = document.getElementById("results");
    const fieldSelect = document.getElementById("fieldSelect");
    const locationSelect = document.getElementById("locationSelect");

    // Function to filter jobs based on search query, field, and location
    function filterJobs() {
        const searchQuery = document.getElementById("searchInput").value.toLowerCase();
        const selectedField = fieldSelect.value.toLowerCase();
        const selectedLocation = locationSelect.value.toLowerCase();
        
        const rows = resultContainer.querySelectorAll("tr");
        rows.forEach(row => {
            const title = row.querySelector("td:nth-child(2)").textContent.toLowerCase();
            const field = row.querySelector("td:nth-child(4)").textContent.toLowerCase();
            const location = row.querySelector("td:nth-child(5)").textContent.toLowerCase();
            if ((title.includes(searchQuery) || searchQuery === "") &&
                (selectedField === "" || field === selectedField) &&
                (selectedLocation === "" || location === selectedLocation)) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        });
    }

    // Add event listeners to dropdowns and search input
    fieldSelect.addEventListener("change", filterJobs);
    locationSelect.addEventListener("change", filterJobs);
    document.getElementById("searchInput").addEventListener("input", filterJobs);

    // Fetch data and populate the table as before
    const url = "http://127.0.0.1:8086/api/job/";
    const headers = {
        method: 'GET',
        mode: 'cors',
        cache: 'default',
        credentials: 'include',
        headers: {
            'Content-Type': 'application/json'
        },
    };
    fetch(url, headers)
        .then(response => {
            if (response.status !== 200) {
                // Handle error
                return;
            }
            response.json().then(data => {
                data.forEach(row => {
                    const tr = document.createElement("tr");
                    // Create and append table cells as before
                    // ...
                    tr.innerHTML = `
                        <td>${row.id}</td>
                        <td>${row.title}</td>
                        <td>${row.description}</td>
                        <td>${row.field}</td>
                        <td>${row.location}</td>
                        <td>${row.qualification}</td>
                        <td>${row.pay}</td>
                        <td><a href="{{site.baseurl}}/jobdetails?id=${row.id}">View Job</a></td>
                    `;
                    resultContainer.appendChild(tr);
                });
                // After populating the table, apply initial filtering
                filterJobs();
            });
        })
        .catch(err => {
            console.error(err);
        });
</script>
